(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-435afc4e"],{6597:function(e,t,r){"use strict";r.d(t,"c",(function(){return o})),r.d(t,"e",(function(){return i})),r.d(t,"b",(function(){return n})),r.d(t,"d",(function(){return s})),r.d(t,"a",(function(){return d}));var a=r("b775");function o(e){return Object(a["b"])({url:"/sysFileInfo/page",method:"get",params:e})}function i(e){return Object(a["b"])({url:"/sysFileInfo/upload",method:"post",data:e})}function n(e){return Object(a["b"])({url:"/sysFileInfo/download",method:"get",params:e,responseType:"blob"})}function s(e){return Object(a["b"])({url:"/sysFileInfo/preview",method:"get",params:e,responseType:"arraybuffer"})}function d(e){return Object(a["b"])({url:"/sysFileInfo/delete",method:"post",data:e})}},7696:function(e,t,r){},af4d:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("a-card",{attrs:{bordered:!1}},[r("a-spin",{attrs:{spinning:e.confirmLoading}},[r("a-tabs",{attrs:{"default-active-key":"1"}},[e.hasPerm("email:sendEmail")?r("a-tab-pane",{key:"1",attrs:{tab:"发送邮件"},on:{change:e.tabsCallback}},[r("a-form",{attrs:{form:e.form1}},[r("a-form-item",{attrs:{label:"收件邮箱"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["to",{rules:[{type:"email",message:"请输入正确的邮箱!"},{required:!0,message:"请输入收件邮箱！"}]}],expression:"['to', {rules: [{type: 'email',message: '请输入正确的邮箱!'},{required: true, message: '请输入收件邮箱！'}]}]"}],attrs:{placeholder:"请输入收件邮箱"}})],1),r("a-form-item",{attrs:{label:"邮件标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入邮件标题！"}]}],expression:"['title', {rules: [{required: true, message: '请输入邮件标题！'}]}]"}],attrs:{placeholder:"请输入邮件标题"}})],1),r("a-form-item",{attrs:{label:"邮件内容"}},[r("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["content",{rules:[{required:!0,message:"请输入邮件内容！"}]}],expression:"['content', {rules: [{required: true, message: '请输入邮件内容！'}]}]"}],attrs:{rows:4,placeholder:"请输入备注"}})],1),r("a-form-item",{staticClass:"subForm-item"},[r("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit1}},[e._v("发送")])],1)],1)],1):e._e(),e.hasPerm("email:sendEmailHtml")?r("a-tab-pane",{key:"2",attrs:{tab:"发送Html邮件"},on:{change:e.tabsCallback}},[r("a-form",{attrs:{form:e.form2}},[r("a-form-item",{attrs:{label:"收件邮箱"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["to",{rules:[{type:"email",message:"请输入正确的邮箱!"},{required:!0,message:"请输入收件邮箱！"}]}],expression:"['to',{rules: [ {type: 'email',message: '请输入正确的邮箱!'},{required: true, message: '请输入收件邮箱！'}]}]"}],attrs:{placeholder:"请输入收件邮箱"}})],1),r("a-form-item",{attrs:{label:"邮件标题"}},[r("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["title",{rules:[{required:!0,message:"请输入邮件标题！"}]}],expression:"['title', {rules: [{required: true, message: '请输入邮件标题！'}]}]"}],attrs:{placeholder:"请输入邮件标题"}})],1),r("a-form-item",{attrs:{label:"邮件内容"}},[r("antd-editor",{attrs:{uploadConfig:e.editorUploadConfig},on:{onchange:e.changeEditor,oninit:e.getEditor},model:{value:e.editorContent,callback:function(t){e.editorContent=t},expression:"editorContent"}})],1),r("a-form-item",{staticClass:"subForm-item"},[r("a-button",{attrs:{type:"primary",loading:e.confirmLoading},on:{click:e.handleSubmit2}},[e._v("发送")])],1)],1)],1):e._e()],1)],1)],1)},o=[],i=(r("159b"),r("d3b7"),r("b775"));function n(e){return Object(i["b"])({url:"/email/sendEmail",method:"post",data:e})}function s(e){return Object(i["b"])({url:"/email/sendEmailHtml",method:"post",data:e})}var d=r("2af9"),m=r("6597"),c={components:{AntdEditor:d["a"]},data:function(){return{editorContentText:"",editorUploadConfig:{method:"http",callback:this.editorUploadImage},confirmLoading:!1,editorContent:"",form1:this.$form.createForm(this),form2:this.$form.createForm(this)}},methods:{tabsCallback:function(e){"1"===e&&(this.$form.createForm(this),this.form2.resetFields(),this.editor.txt.clear()),"2"===e&&(this.$form.createForm(this),this.form1.resetFields())},editorUploadImage:function(e,t){var r=this,a=new FormData;e.forEach((function(e){a.append("file",e)})),Object(m["e"])(a).then((function(e){e.success?t("http://127.0.0.1:9092/sysFileInfo/preview?id="+e.data):r.$message.error("编辑器上传图片失败："+e.message)}))},getEditor:function(e){this.editor=e},changeEditor:function(e,t){this.editorContent=e,this.editorContentText=t.text()},handleSubmit1:function(){var e=this,t=this.form1.validateFields;this.confirmLoading=!0,t((function(t,r){t?e.confirmLoading=!1:n(r).then((function(t){t.success?(e.$message.success("发送成功"),e.confirmLoading=!1,e.form1.resetFields()):e.$message.error("发送失败："+t.message)})).finally((function(t){e.confirmLoading=!1}))}))},handleSubmit2:function(){var e=this,t=this.form2.validateFields;""!=this.editorContent?(this.confirmLoading=!0,t((function(t,r){t?e.confirmLoading=!1:(r.content=e.editorContent,s(r).then((function(t){t.success?(e.$message.success("发送成功"),e.confirmLoading=!1,e.editor.txt.clear(),e.form2.resetFields()):e.$message.error("发送失败："+t.message)})).finally((function(t){e.confirmLoading=!1})))}))):this.$message.error("请填写邮件内容")}}},l=c,u=(r("cd2b"),r("2877")),f=Object(u["a"])(l,a,o,!1,null,null,null);t["default"]=f.exports},cd2b:function(e,t,r){"use strict";r("7696")}}]);