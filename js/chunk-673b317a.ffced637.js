(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-673b317a","chunk-2d0a49ab"],{"06c2":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"日志详情",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"方法名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["methodName"],expression:"['methodName']"}]})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"地址",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["location"],expression:"['location']"}]})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"浏览器",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["browser"],expression:"['browser']"}]})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"操作系统",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["os"],expression:"['os']"}]})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"类名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["className"],expression:"['className']"}],attrs:{rows:4}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"具体消息",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["message"],expression:"['message']"}],attrs:{rows:4}})],1)],1)],1),a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"请求参数",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["param"],expression:"['param']"}],attrs:{rows:4}})],1)],1),a("a-col",{attrs:{md:12,sm:24}},[a("a-form-item",{attrs:{label:"返回结果",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["result"],expression:"['result']"}],attrs:{rows:4}})],1)],1)],1)],1)],1)],1)},s=[],o={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this)}},methods:{details:function(e){var t=this;this.visible=!0,setTimeout((function(){t.form.setFieldsValue({location:e.location,browser:e.browser,os:e.os,className:e.className,methodName:e.methodName,param:e.param,result:e.result,message:e.message})}),100)},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},l=o,n=a("2877"),c=Object(n["a"])(l,r,s,!1,null,null,null);t["default"]=c.exports},"487a":function(e,t,a){"use strict";a.d(t,"d",(function(){return s})),a.d(t,"b",(function(){return o})),a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return n}));var r=a("b775");function s(e){return Object(r["b"])({url:"/sysVisLog/page",method:"get",params:e})}function o(e){return Object(r["b"])({url:"/sysOpLog/page",method:"get",params:e})}function l(e){return Object(r["b"])({url:"/sysVisLog/delete",method:"post",data:e})}function n(e){return Object(r["b"])({url:"/sysOpLog/delete",method:"post",data:e})}},8147:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-card",{attrs:{bordered:!1}},[e.hasPerm("sysOpLog:page")?a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"日志名称"}},[a("a-input",{attrs:{"allow-clear":"",placeholder:"请输入日志名称"},model:{value:e.queryParam.name,callback:function(t){e.$set(e.queryParam,"name",t)},expression:"queryParam.name"}})],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-select",{attrs:{"allow-clear":"",placeholder:"请选择操作类型"},model:{value:e.queryParam.opType,callback:function(t){e.$set(e.queryParam,"opType",t)},expression:"queryParam.opType"}},e._l(e.opTypeDict,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"是否成功"}},[a("a-select",{attrs:{placeholder:"请选择是否成功"},model:{value:e.queryParam.success,callback:function(t){e.$set(e.queryParam,"success",t)},expression:"queryParam.success"}},e._l(e.successDict,(function(t,r){return a("a-select-option",{key:r,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1):e._e(),e.hasPerm("sysOpLog:delete")?a("div",{staticClass:"table-operator"},[a("a-popconfirm",{attrs:{placement:"top",title:"确认清空日志？"},on:{confirm:function(){return e.sysOpLogDelete()}}},[a("a-button",[e._v("清空日志")])],1)],1):e._e(),a("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"opType",fn:function(t){return a("span",{},[e._v(" "+e._s(e.opTypeFilter(t))+" ")])}},{key:"success",fn:function(t){return a("span",{},[e._v(" "+e._s(e.successFilter(t))+" ")])}},{key:"name",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"url",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"opTime",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,r){return a("span",{},[a("span",{attrs:{slot:"action"},slot:"action"},[a("a",{on:{click:function(t){return e.$refs.detailsOplog.details(r)}}},[e._v("查看详情")])])])}}])}),a("details-oplog",{ref:"detailsOplog"})],1)},s=[],o=(a("4de4"),a("2af9")),l=a("487a"),n=a("06c2"),c=a("126f"),i={components:{STable:o["r"],Ellipsis:o["h"],detailsOplog:n["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"日志名称",dataIndex:"name",scopedSlots:{customRender:"name"}},{title:"操作类型",dataIndex:"opType",scopedSlots:{customRender:"opType"}},{title:"执行结果",dataIndex:"success",scopedSlots:{customRender:"success"}},{title:"ip",dataIndex:"ip"},{title:"请求地址",dataIndex:"url",scopedSlots:{customRender:"url"}},{title:"操作时间",dataIndex:"opTime",scopedSlots:{customRender:"opTime"}},{title:"操作人",dataIndex:"account"},{title:"详情",dataIndex:"action",width:"150px",scopedSlots:{customRender:"action"}}],loadData:function(t){return Object(l["b"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},selectedRowKeys:[],selectedRows:[],defaultExpandedKeys:[],opTypeDict:[],successDict:[]}},created:function(){this.sysDictTypeDropDown()},methods:{opTypeFilter:function(e){var t=this.opTypeDict.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},successFilter:function(e){var t=this.successDict.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysDictTypeDropDown:function(){var e=this;Object(c["c"])({code:"op_type"}).then((function(t){e.opTypeDict=t.data})),Object(c["c"])({code:"yes_or_no"}).then((function(t){e.successDict=t.data}))},sysOpLogDelete:function(){var e=this;Object(l["a"])().then((function(t){t.success?(e.$message.success("清空成功"),e.$refs.table.refresh(!0)):e.$message.error("清空失败："+t.message)}))},toggleAdvanced:function(){this.advanced=!this.advanced},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},u=i,d=(a("ba21"),a("2877")),p=Object(d["a"])(u,r,s,!1,null,null,null);t["default"]=p.exports},9558:function(e,t,a){},ba21:function(e,t,a){"use strict";a("9558")}}]);