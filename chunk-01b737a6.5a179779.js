(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-01b737a6"],{"985f":function(e,n,t){"use strict";t.r(n);var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("a-modal",{attrs:{title:"授权菜单",width:600,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"菜单权限",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[t("a-tree",{attrs:{multiple:"",checkable:"",checkStrictly:"","auto-expand-parent":e.autoExpandParent,"expanded-keys":e.expandedKeys,"tree-data":e.menuTreeData,"selected-keys":e.selectedKeys,replaceFields:e.replaceFields},on:{expand:e.onExpand,select:e.onSelect,check:e.treeCheck},model:{value:e.checkedKeys,callback:function(n){e.checkedKeys=n},expression:"checkedKeys"}})],1)],1)],1)],1)},s=[],o=(t("159b"),t("d3b7"),t("0bfe")),r=t("a240"),i={data:function(){return{labelCol:{style:{"padding-right":"20px"},xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},menuTreeData:[],expandedKeys:[],checkedKeys:[],visible:!1,confirmLoading:!1,formLoading:!0,autoExpandParent:!0,selectedKeys:[],subValues:[],roleEntity:[],replaceFields:{key:"id"},form:this.$form.createForm(this)}},methods:{roleMenu:function(e){this.formLoading=!0,this.roleEntity=e,this.visible=!0,this.getMenuTree(),this.expandedMenuKeys(e)},getMenuTree:function(){var e=this;Object(o["a"])().then((function(n){n.success&&(e.menuTreeData=n.data,e.menuTreeData.forEach((function(n){e.expandedKeys.push(n.id)})))}))},expandedMenuKeys:function(e){var n=this;Object(r["h"])({id:e.id}).then((function(e){e.success&&(n.checkedKeys=e.data),n.formLoading=!1}))},treeCheck:function(e){},onExpand:function(e){this.expandedKeys=e,this.autoExpandParent=!1},onCheck:function(e){this.checkedKeys=e},onSelect:function(e,n){this.selectedKeys=e},handleSubmit:function(){var e=this,n=this.form.validateFields;this.confirmLoading=!0,n((function(n,t){n?e.confirmLoading=!1:Object(r["f"])({id:e.roleEntity.id,grantMenuIdList:e.checkedKeys.checked}).then((function(n){n.success?(e.$message.success("授权成功"),e.confirmLoading=!1,e.$emit("ok",t),e.handleCancel()):e.$message.error("授权失败："+n.message)})).finally((function(n){e.confirmLoading=!1}))}))},handleCancel:function(){this.checkedKeys=[],this.expandedKeys=[],this.visible=!1}}},c=i,d=t("2877"),u=Object(d["a"])(c,a,s,!1,null,null,null);n["default"]=u.exports},a240:function(e,n,t){"use strict";t.d(n,"a",(function(){return s})),t.d(n,"b",(function(){return o})),t.d(n,"d",(function(){return r})),t.d(n,"c",(function(){return i})),t.d(n,"h",(function(){return c})),t.d(n,"f",(function(){return d})),t.d(n,"g",(function(){return u})),t.d(n,"e",(function(){return l}));var a=t("b775");function s(e){return Object(a["b"])({url:"/sysRole/page",method:"get",params:e})}function o(e){return Object(a["b"])({url:"/sysRole/add",method:"post",data:e})}function r(e){return Object(a["b"])({url:"/sysRole/edit",method:"post",data:e})}function i(e){return Object(a["b"])({url:"/sysRole/delete",method:"post",data:e})}function c(e){return Object(a["b"])({url:"/sysRole/ownMenu",method:"get",params:e})}function d(e){return Object(a["b"])({url:"/sysRole/grantMenu",method:"post",data:e})}function u(e){return Object(a["b"])({url:"/sysRole/ownData",method:"get",params:e})}function l(e){return Object(a["b"])({url:"/sysRole/grantData",method:"post",data:e})}}}]);