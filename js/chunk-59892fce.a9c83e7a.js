(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59892fce","chunk-6e46e12b","chunk-2d0e22e8"],{"1ced":function(e,t,a){},6597:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"e",(function(){return l})),a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return r})),a.d(t,"a",(function(){return s}));var i=a("b775");function n(e){return Object(i["b"])({url:"/sysFileInfo/page",method:"get",params:e})}function l(e){return Object(i["b"])({url:"/sysFileInfo/upload",method:"post",data:e})}function o(e){return Object(i["b"])({url:"/sysFileInfo/download",method:"get",params:e,responseType:"blob"})}function r(e){return Object(i["b"])({url:"/sysFileInfo/preview",method:"get",params:e,responseType:"arraybuffer"})}function s(e){return Object(i["b"])({url:"/sysFileInfo/delete",method:"post",data:e})}},"7e37":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"文件信息详情",footer:null,width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}]},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),a("a-form-item",{attrs:{label:"文件存储位置",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.fileLocation)+" ")]),a("a-form-item",{attrs:{label:"文件仓库",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.fileBucket)+" ")]),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件名称"}},[e._v(" "+e._s(e.fileDetail.fileOriginName)+" ")]),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件后缀"}},[e._v(" "+e._s(e.fileDetail.fileSuffix)+" ")]),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"文件大小"}},[e._v(" "+e._s(e.fileDetail.fileSizeKb)+" ")]),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"唯一标识"}},[e._v(" "+e._s(e.fileDetail.fileObjectName)+" ")]),a("a-form-item",{attrs:{label:"存储路径",labelCol:e.labelCol,wrapperCol:e.wrapperCol}},[e._v(" "+e._s(e.fileDetail.filePath)+" ")])],1)],1)],1)},n=[],l={data:function(){return{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:15}},fileDetail:[],visible:!1,confirmLoading:!1,form:this.$form.createForm(this)}},methods:{detail:function(e){this.fileDetail=e,this.visible=!0},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},o=l,r=a("2877"),s=Object(r["a"])(o,i,n,!1,null,null,null);t["default"]=s.exports},cbf1:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-spin",{attrs:{spinning:e.cardLoading}},[a("a-card",{attrs:{bordered:!1}},[e.hasPerm("sysFileInfo:page")?a("div",{staticClass:"table-page-search-wrapper"},[a("a-form",{attrs:{layout:"inline"}},[a("a-row",{attrs:{gutter:48}},[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"存储位置"}},[a("a-select",{attrs:{placeholder:"请选择存储位置"},model:{value:e.queryParam.fileLocation,callback:function(t){e.$set(e.queryParam,"fileLocation",t)},expression:"queryParam.fileLocation"}},e._l(e.fileLocationDictTypeDropDown,(function(t,i){return a("a-select-option",{key:i,attrs:{value:t.code}},[e._v(e._s(t.value))])})),1)],1)],1),a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"文件仓库"}},[a("a-input",{attrs:{placeholder:"请输入文件仓库"},model:{value:e.queryParam.fileBucket,callback:function(t){e.$set(e.queryParam,"fileBucket",t)},expression:"queryParam.fileBucket"}})],1)],1),e.advanced?[a("a-col",{attrs:{md:8,sm:24}},[a("a-form-item",{attrs:{label:"文件名称"}},[a("a-input",{attrs:{placeholder:"请输入文件名称（上传时候的文件名）"},model:{value:e.queryParam.fileOriginName,callback:function(t){e.$set(e.queryParam,"fileOriginName",t)},expression:"queryParam.fileOriginName"}})],1)],1)]:e._e(),a("a-col",{attrs:{md:e.advanced?24:8,sm:24}},[a("span",{staticClass:"table-page-search-submitButtons",style:e.advanced&&{float:"right",overflow:"hidden"}||{}},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),a("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")]),a("a",{staticStyle:{"margin-left":"8px"},on:{click:e.toggleAdvanced}},[e._v(" "+e._s(e.advanced?"收起":"展开")+" "),a("a-icon",{attrs:{type:e.advanced?"up":"down"}})],1)],1)])],2)],1)],1):e._e(),e.hasPerm("sysFileInfo:upload")?a("div",{staticClass:"table-operator"},[e.hasPerm("sysFileInfo:upload")?a("a-upload",{attrs:{name:"file",multiple:!0,customRequest:e.customRequest,showUploadList:!1}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v("上传文件")],1)],1):e._e()],1):e._e(),a("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"fileOriginName",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileObjectName",fn:function(t){return a("span",{},[a("ellipsis",{attrs:{length:10,tooltip:""}},[e._v(e._s(t))])],1)}},{key:"fileLocation",fn:function(t){return a("span",{},[e._v(" "+e._s(e.fileLocationFilter(t))+" ")])}},{key:"fileSuffix",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:"blue"}},[e._v(e._s(t))])],1)}},{key:"action",fn:function(t,i){return a("span",{},[e.hasPerm("sysFileInfo:download")?a("a",{on:{click:function(t){return e.sysFileInfoDownload(i)}}},[e._v("下载")]):e._e(),e.hasPerm("sysFileInfo:download")&e.hasPerm("sysFileInfo:detail")?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:detail")?a("a",{on:{click:function(t){return e.$refs.detailForm.detail(i)}}},[e._v("详情")]):e._e(),e.hasPerm("sysFileInfo:detail")&e.hasPerm("sysFileInfo:delete")?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:delete")?a("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.sysFileInfoDelete(i)}}},[a("a",[e._v("删除")])]):e._e(),(e.hasPerm("sysFileInfo:preview")&"png"===i.fileSuffix||"jpeg"===i.fileSuffix||"jpg"===i.fileSuffix||"gif"===i.fileSuffix||"tif"===i.fileSuffix||"bmp"===i.fileSuffix)&e.hasPerm("sysFileInfo:delete")?a("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysFileInfo:preview")&"png"===i.fileSuffix||"jpeg"===i.fileSuffix||"jpg"===i.fileSuffix||"gif"===i.fileSuffix||"tif"===i.fileSuffix||"bmp"===i.fileSuffix?a("a",{on:{click:function(t){return e.$refs.previewForm.preview(i)}}},[e._v("预览")]):e._e()],1)}}])}),e.hasPerm("sysFileInfo:detail")?a("detail-form",{ref:"detailForm",on:{ok:e.handleOk}}):e._e(),e.hasPerm("sysFileInfo:preview")?a("preview-form",{ref:"previewForm"}):e._e()],1)],1)},n=[],l=(a("4de4"),a("4d63"),a("ac1f"),a("25f0"),a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("5319"),a("2af9")),o=a("126f"),r=a("6597"),s=a("7e37"),c=a("f66a"),f={components:{STable:l["r"],Ellipsis:l["h"],detailForm:s["default"],previewForm:c["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"存储位置",dataIndex:"fileLocation",scopedSlots:{customRender:"fileLocation"}},{title:"文件仓库",dataIndex:"fileBucket"},{title:"文件名称",dataIndex:"fileOriginName",scopedSlots:{customRender:"fileOriginName"}},{title:"文件后缀",dataIndex:"fileSuffix",scopedSlots:{customRender:"fileSuffix"}},{title:"文件大小",dataIndex:"fileSizeInfo"},{title:"唯一标识id",dataIndex:"fileObjectName",scopedSlots:{customRender:"fileObjectName"}}],loadData:function(t){return Object(r["c"])(Object.assign(t,e.queryParam)).then((function(e){return e.data}))},cardLoading:!1,fileLocationDictTypeDropDown:[],selectedRowKeys:[],selectedRows:[]}},created:function(){this.sysDictTypeDropDown(),(this.hasPerm("sysPos:edit")||this.hasPerm("sysPos:delete"))&&this.columns.push({title:"操作",width:"200px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{fileLocationFilter:function(e){var t=this.fileLocationDictTypeDropDown.filter((function(t){return t.code==e}));if(t.length>0)return t[0].value},sysDictTypeDropDown:function(){var e=this;Object(o["c"])({code:"file_storage_location"}).then((function(t){e.fileLocationDictTypeDropDown=t.data}))},sysFileInfoDownload:function(e){var t=this;this.cardLoading=!0,Object(r["b"])({id:e.id}).then((function(e){t.cardLoading=!1,t.downloadfile(e)})).catch((function(e){t.cardLoading=!1,t.$message.error("下载错误：获取文件流错误")}))},downloadfile:function(e){var t=new Blob([e.data],{type:"application/octet-stream;charset=UTF-8"}),a=e.headers["content-disposition"],i=new RegExp("filename=([^;]+\\.[^\\.;]+);*"),n=i.exec(a),l=n[1],o=document.createElement("a"),r=window.URL.createObjectURL(t),s=/^["](.*)["]$/g;o.style.display="none",o.href=r,o.download=decodeURI(l.replace(s,"$1")),document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(r)},sysFileInfoDelete:function(e){var t=this;Object(r["a"])(e).then((function(e){e.success?(t.$message.success("删除成功"),t.$refs.table.refresh()):t.$message.error("删除失败："+e.message)})).catch((function(e){t.$message.error("删除错误："+e.message)}))},toggleAdvanced:function(){this.advanced=!this.advanced},customRequest:function(e){var t=this,a=new FormData;a.append("file",e.file),Object(r["e"])(a).then((function(e){e.success?(t.$message.success("上传成功"),t.$refs.table.refresh()):t.$message.error("上传失败："+e.message)}))},handleOk:function(){this.$refs.table.refresh()},onSelectChange:function(e,t){this.selectedRowKeys=e,this.selectedRows=t}}},d=f,u=(a("eedc"),a("2877")),m=Object(u["a"])(d,i,n,!1,null,null,null);t["default"]=m.exports},eedc:function(e,t,a){"use strict";a("1ced")},f66a:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"预览图片",footer:null,width:900,visible:e.visible},on:{cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.divLoading}},[a("div",{staticStyle:{"text-align":"center"}},[a("img",{staticStyle:{"max-width":"99%"},attrs:{src:e.src}})])])],1)},n=[],l=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("6597")),o={data:function(){return{visible:!1,src:"",divLoading:!1}},methods:{preview:function(e){this.visible=!0,this.divLoading=!0,this.sysFileInfoPreview(e)},sysFileInfoPreview:function(e){var t=this;Object(l["d"])({id:e.id}).then((function(e){t.divLoading=!1,t.downloadfile(e)})).catch((function(e){t.divLoading=!1,t.$message.error("预览错误："+e.message)}))},downloadfile:function(e){var t=new Blob([e]);this.src=window.URL.createObjectURL(t)},handleCancel:function(){this.src="",this.visible=!1}}},r=o,s=a("2877"),c=Object(s["a"])(r,i,n,!1,null,null,null);t["default"]=c.exports}}]);