(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6fc2c02","chunk-3ff2f7b3","chunk-88777fe4"],{"25fa":function(e,r,t){"use strict";t.d(r,"c",(function(){return s})),t.d(r,"a",(function(){return o})),t.d(r,"b",(function(){return n})),t.d(r,"d",(function(){return i})),t.d(r,"f",(function(){return l})),t.d(r,"e",(function(){return d}));var a=t("b775");function s(e){return Object(a["b"])({url:"/sysOrg/tree",method:"get",params:e})}function o(e){return Object(a["b"])({url:"/sysOrg/list",method:"get",params:e})}function n(e){return Object(a["b"])({url:"/sysOrg/page",method:"get",params:e})}function i(e){return Object(a["b"])({url:"/sysOrg/add",method:"post",data:e})}function l(e){return Object(a["b"])({url:"/sysOrg/edit",method:"post",data:e})}function d(e){return Object(a["b"])({url:"/sysOrg/delete",method:"post",data:e})}},"3d8b":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-row",{attrs:{gutter:24}},[t("a-col",{attrs:{md:5,sm:24}},[t("a-card",{attrs:{bordered:!1,loading:e.treeLoading}},[""!=this.orgTree?t("div",[e.orgTree.length?t("a-tree",{staticStyle:{scroll:"true"},attrs:{treeData:e.orgTree,defaultExpandAll:!0,defaultExpandedKeys:e.defaultExpandedKeys,replaceFields:e.replaceFields},on:{select:e.handleClick}}):e._e()],1):t("div",[t("a-empty",{attrs:{image:e.simpleImage}})],1)])],1),t("a-col",{attrs:{md:19,sm:24}},[t("a-card",{attrs:{bordered:!1}},[e.hasPerm("sysOrg:page")?t("div",{staticClass:"table-page-search-wrapper"},[t("a-form",{attrs:{layout:"inline"}},[t("a-row",{attrs:{gutter:48}},[t("a-col",{attrs:{md:8,sm:24}},[t("a-form-item",{attrs:{label:"机构名称"}},[t("a-input",{attrs:{"allow-clear":"",placeholder:"请输入机构名称"},model:{value:e.queryParam.name,callback:function(r){e.$set(e.queryParam,"name",r)},expression:"queryParam.name"}})],1)],1),t("a-col",{attrs:{md:8,sm:24}},[t("a-button",{attrs:{type:"primary"},on:{click:function(r){return e.$refs.table.refresh(!0)}}},[e._v("查询")]),t("a-button",{staticStyle:{"margin-left":"8px"},on:{click:function(){return e.queryParam={}}}},[e._v("重置")])],1),t("a-col",{attrs:{md:8,sm:24}})],1)],1)],1):e._e(),e.hasPerm("sysOrg:add")?t("div",{staticClass:"table-operator"},[e.hasPerm("sysOrg:add")?t("a-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(r){return e.$refs.addForm.add()}}},[e._v("新增机构")]):e._e()],1):e._e(),t("s-table",{ref:"table",attrs:{size:"default",columns:e.columns,data:e.loadData,alert:!0,rowKey:function(e){return e.id},rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onSelectChange}},scopedSlots:e._u([{key:"action",fn:function(r,a){return t("span",{},[e.hasPerm("sysOrg:edit")?t("a",{on:{click:function(r){return e.$refs.editForm.edit(a)}}},[e._v("编辑")]):e._e(),e.hasPerm("sysOrg:edit")&e.hasPerm("sysOrg:delete")?t("a-divider",{attrs:{type:"vertical"}}):e._e(),e.hasPerm("sysOrg:delete")?t("a-popconfirm",{attrs:{placement:"topRight",title:"确认删除？"},on:{confirm:function(){return e.sysOrgDelete(a)}}},[t("a",[e._v("删除")])]):e._e()],1)}}])}),t("add-form",{ref:"addForm",on:{ok:e.handleOk}}),t("edit-form",{ref:"editForm",on:{ok:e.handleOk}})],1)],1)],1)},s=[],o=t("b85c"),n=(t("06f4"),t("fc25")),i=(t("d3b7"),t("25f0"),t("2af9")),l=t("25fa"),d=t("4f46"),c=t("a09c"),u={components:{STable:i["r"],addForm:d["default"],editForm:c["default"]},data:function(){var e=this;return{advanced:!1,queryParam:{},columns:[{title:"机构名称",dataIndex:"name"},{title:"唯一编码",dataIndex:"code"},{title:"排序",dataIndex:"sort"},{title:"备注",dataIndex:"remark"}],loadData:function(r){return Object(l["b"])(Object.assign(r,e.queryParam)).then((function(e){return e.data}))},orgTree:[],selectedRowKeys:[],selectedRows:[],defaultExpandedKeys:[],expandedKeys:[],searchValue:"",autoExpandParent:!0,treeLoading:!0,simpleImage:n["a"].PRESENTED_IMAGE_SIMPLE,replaceFields:{key:"id"}}},created:function(){this.getOrgTree(),(this.hasPerm("sysOrg:edit")||this.hasPerm("sysOrg:delete"))&&this.columns.push({title:"操作",width:"150px",dataIndex:"action",scopedSlots:{customRender:"action"}})},methods:{getOrgTree:function(){var e=this;Object(l["c"])(Object.assign(this.queryParam)).then((function(r){if(e.treeLoading=!1,r.success){e.orgTree=r.data,e.queryParam.parentId=e.orgTree[0].id;var t,a=Object(o["a"])(r.data);try{for(a.s();!(t=a.n()).done;){var s=t.value;0==s.parentId&&e.defaultExpandedKeys.push(s.id)}}catch(n){a.e(n)}finally{a.f()}e.$refs.table.refresh()}}))},sysOrgDelete:function(e){var r=this;Object(l["e"])(e).then((function(e){e.success?(r.$message.success("删除成功"),r.getOrgTree(),r.$refs.table.refresh()):r.$message.error("删除失败："+e.message)})).catch((function(e){r.$message.error("删除错误："+e.message)}))},handleClick:function(e){this.queryParam={pid:e.toString()},this.$refs.table.refresh(!0)},toggleAdvanced:function(){this.advanced=!this.advanced},handleOk:function(){this.getOrgTree(),this.$refs.table.refresh()},onSelectChange:function(e,r){this.selectedRowKeys=e,this.selectedRows=r}}},m=u,f=(t("c772"),t("2877")),p=Object(f["a"])(m,a,s,!1,null,null,null);r["default"]=p.exports},"4f46":function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:"新增机构",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{attrs:{label:"机构名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入机构名称！"}]}],expression:"['name', {rules: [{required: true, message: '请输入机构名称！'}]}]"}],attrs:{placeholder:"请输入机构名称"}})],1),t("a-form-item",{attrs:{label:"唯一编码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入唯一编码！"}]}],expression:"['code', {rules: [{required: true, message: '请输入唯一编码！'}]}]"}],attrs:{placeholder:"请输入唯一编码"}})],1),t("a-form-item",{attrs:{label:"上级机构",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!0,message:"请选择上级机构！"}]}],expression:"['pid', {rules: [{ required: true, message: '请选择上级机构！' }]}]"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"300px",overflow:"auto"},treeData:e.orgTree,placeholder:"请选择上级机构",treeDefaultExpandAll:""},scopedSlots:e._u([{key:"title",fn:function(r){var a=r.id;return t("span",{},[e._v(e._s(a)+" ")])}}])})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100}],expression:"['sort', { initialValue: 100 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序",min:1,max:1e3}})],1),t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:"请输入备注"}})],1)],1)],1)],1)},s=[],o=(t("d3b7"),t("25fa")),n={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},orgTree:[],visible:!1,confirmLoading:!1,formLoading:!0,form:this.$form.createForm(this)}},methods:{add:function(){this.visible=!0,this.getOrgTree()},getOrgTree:function(){var e=this;Object(o["c"])().then((function(r){e.formLoading=!1,r.success?e.orgTree=[{id:"-1",parentId:"0",title:"顶级",value:"0",pid:"0",children:r.data}]:e.orgTree=[]}))},handleSubmit:function(){var e=this,r=this.form.validateFields;this.confirmLoading=!0,r((function(r,t){r?e.confirmLoading=!1:Object(o["d"])(t).then((function(r){r.success?(e.$message.success("新增成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("新增失败："+r.message)})).finally((function(r){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},i=n,l=t("2877"),d=Object(l["a"])(i,a,s,!1,null,null,null);r["default"]=d.exports},a09c:function(e,r,t){"use strict";t.r(r);var a=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("a-modal",{attrs:{title:"编辑机构",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[t("a-spin",{attrs:{spinning:e.formLoading}},[t("a-form",{attrs:{form:e.form}},[t("a-form-item",{staticStyle:{display:"none"},attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}]})],1),t("a-form-item",{attrs:{label:"机构名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{rules:[{required:!0,message:"请输入机构名称！"}]}],expression:"['name', {rules: [{required: true, message: '请输入机构名称！'}]}]"}],attrs:{placeholder:"请输入机构名称"}})],1),t("a-form-item",{attrs:{label:"唯一编码",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["code",{rules:[{required:!0,message:"请输入唯一编码！"}]}],expression:"['code', {rules: [{required: true, message: '请输入唯一编码！'}]}]"}],attrs:{placeholder:"请输入唯一编码"}})],1),t("a-form-item",{attrs:{label:"上级机构",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-tree-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["pid",{rules:[{required:!0,message:"请选择上级机构！"}]}],expression:"['pid', {rules: [{ required: true, message: '请选择上级机构！' }]}]"}],staticStyle:{width:"100%"},attrs:{dropdownStyle:{maxHeight:"300px",overflow:"auto"},treeData:e.orgTree,placeholder:"请选择上级机构",treeDefaultExpandAll:""},scopedSlots:e._u([{key:"title",fn:function(r){var a=r.id;return t("span",{},[e._v(e._s(a)+" ")])}}])})],1),t("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"排序"}},[t("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["sort",{initialValue:100}],expression:"['sort', { initialValue: 100 }]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入排序",min:1,max:1e3}})],1),t("a-form-item",{attrs:{label:"备注",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[t("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["remark"],expression:"['remark']"}],attrs:{rows:4,placeholder:"请输入备注"}})],1)],1)],1)],1)},s=[],o=(t("b0c0"),t("4e82"),t("d3b7"),t("25fa")),n={data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},orgTree:[],visible:!1,confirmLoading:!1,formLoading:!0,form:this.$form.createForm(this)}},methods:{edit:function(e){var r=this;this.visible=!0,this.getOrgTree(),setTimeout((function(){r.form.setFieldsValue({id:e.id,name:e.name,code:e.code,sort:e.sort,pid:e.pid,remark:e.remark})}),100)},getOrgTree:function(){var e=this;Object(o["c"])().then((function(r){e.formLoading=!1,r.success?e.orgTree=[{id:"-1",parentId:"0",title:"顶级",value:"0",pid:"0",children:r.data}]:e.orgTree=[]}))},handleSubmit:function(){var e=this,r=this.form.validateFields;this.confirmLoading=!0,r((function(r,t){r?e.confirmLoading=!1:Object(o["f"])(t).then((function(r){r.success?(e.$message.success("编辑成功"),e.visible=!1,e.confirmLoading=!1,e.$emit("ok",t),e.form.resetFields()):e.$message.error("编辑失败："+r.message)})).finally((function(r){e.confirmLoading=!1}))}))},handleCancel:function(){this.form.resetFields(),this.visible=!1}}},i=n,l=t("2877"),d=Object(l["a"])(i,a,s,!1,null,null,null);r["default"]=d.exports},b85c:function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));t("a4d3"),t("e01a"),t("d3b7"),t("d28b"),t("3ca3"),t("ddb0");var a=t("06c5");function s(e,r){var t="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=Object(a["a"])(e))||r&&e&&"number"===typeof e.length){t&&(e=t);var s=0,o=function(){};return{s:o,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,i=!0,l=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return i=e.done,e},e:function(e){l=!0,n=e},f:function(){try{i||null==t["return"]||t["return"]()}finally{if(l)throw n}}}}},c772:function(e,r,t){"use strict";t("f847")},f847:function(e,r,t){}}]);