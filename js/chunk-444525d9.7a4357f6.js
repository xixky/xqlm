(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-444525d9"],{"2c6e":function(e,t,a){"use strict";a("4e43")},"30e7":function(e,t,a){"use strict";a.d(t,"f",(function(){return i})),a.d(t,"e",(function(){return o})),a.d(t,"a",(function(){return s})),a.d(t,"d",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return u}));a("99af");var r=a("b775");function i(e,t){return Object(r["b"])({url:"/position/list?pageNo=".concat(t.pageNo,"&pageSize=").concat(t.pageSize),method:"post",data:e})}function o(e){return Object(r["b"])({url:"/position/count",method:"post",data:e})}function s(e){return Object(r["b"])({url:"/position/add",method:"post",data:e})}function n(e){return Object(r["b"])({url:"/position/edit",method:"post",data:e})}function l(e){return Object(r["b"])({url:"/position/detail",method:"post",data:e})}function c(e){return Object(r["b"])({url:"/position/down",method:"post",data:e})}function u(e){return Object(r["b"])({url:"/position/up",method:"post",data:e})}},"4e43":function(e,t,a){},6174:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editor"},[a("div",{ref:"toolbar",staticClass:"toolbar"}),a("div",{ref:"editor",staticClass:"text"})])},i=[],o=a("1a0b"),s=a.n(o),n={data:function(){return{editor:null,info_:null}},model:{prop:"value",event:"change"},props:{value:{type:String,default:""},isClear:{type:Boolean,default:!1}},watch:{isClear:function(e){e&&(this.editor.txt.clear(),this.info_=null)},value:function(e){e!==this.editor.txt.html()&&this.editor.txt.html(this.value)}},mounted:function(){this.seteditor(),this.editor.txt.html(this.value)},methods:{seteditor:function(){var e=this;this.editor=new s.a(this.$refs.toolbar,this.$refs.editor),this.editor.customConfig.uploadImgShowBase64=!1,this.editor.customConfig.uploadImgServer="/apisc/fileoss/uploadFile",this.editor.customConfig.uploadImgHeaders={Authorization:this.$store.state.user.token},this.editor.customConfig.uploadFileName="file",this.editor.customConfig.uploadImgMaxSize=2097152,this.editor.customConfig.uploadImgMaxLength=6,this.editor.customConfig.uploadImgTimeout=18e4,this.editor.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","image","table","undo","redo","fullscreen"],this.editor.customConfig.uploadImgHooks={fail:function(e,t,a){},success:function(e,t,a){},timeout:function(e,t){},error:function(e,t){},customInsert:function(e,t,a){var r=t.data.url;e(r)}},this.editor.customConfig.onchange=function(t){e.info_=t,e.$emit("change",e.info_)},this.editor.create()}}},l=n,c=(a("2c6e"),a("2877")),u=Object(c["a"])(l,r,i,!1,null,"1dabe3f1",null);t["a"]=u.exports},"795c":function(e,t,a){},ce29:function(e,t,a){"use strict";a("795c")},d507:function(e,t,a){"use strict";a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return s}));var r=a("b775");function i(){return Object(r["b"])({url:"/ysCompany/nameList",method:"POST"})}function o(e){return Object(r["b"])({url:"/ysCompany/list",method:"post",params:e})}function s(e){return Object(r["b"])({url:"/ysCompany/tree",method:"post",params:e})}},eed9:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a("b775");function i(e){return Object(r["b"])({url:"/dict/listByCategory?category=".concat(e),method:"get"})}},f413:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-modal",{attrs:{title:"新增岗位",width:900,visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleSubmit,cancel:e.handleCancel}},[a("a-spin",{attrs:{spinning:e.confirmLoading}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"岗位名称",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["psName",{rules:[{required:!0,message:"请输入公司名称！"}]}],expression:"['psName', {rules: [{required: true, message: '请输入公司名称！'}]}]"}],attrs:{placeholder:"请输入岗位名称"}})],1),a("a-form-item",{attrs:{label:"岗位类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psCategory",{rules:[{required:!0,message:"请选择岗位类型"}]}],expression:"['psCategory', {rules: [{required: true, message: '请选择岗位类型'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择岗位类型","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.categoryList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.tag}},[e._v(" "+e._s(t.content)+" ")])})),1)],1),e.companyList.length>1?a("a-form-item",{attrs:{label:"所属园所",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psCompanyId",{rules:[{required:!0,message:"请选择所属园所"}]}],expression:"['psCompanyId', {rules: [{required: true, message: '请选择所属园所'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择园所","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.companyList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.id}},[e._v(" "+e._s(t.cpName)+" ")])})),1)],1):e._e(),a("a-form-item",{attrs:{label:"工作地点",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-cascader",{directives:[{name:"decorator",rawName:"v-decorator",value:["pccList",{rules:[{required:!0,message:"请选择工作地点"}]}],expression:"['pccList', {rules: [{required: true, message: '请选择工作地点'}]}]"}],staticStyle:{width:"400px"},attrs:{"default-value":e.cityList,options:e.cityArray,placeholder:"请选择工作地点"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"学历要求",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psEduMode",{rules:[{required:!0,message:"请选择岗位类型"}]}],expression:"['psEduMode', {rules: [{required: true, message: '请选择岗位类型'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择学历","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.eduModeList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.tag}},[e._v(" "+e._s(t.content)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"工作年限",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psWkYear",{rules:[{required:!0,message:"请选择岗位类型"}]}],expression:"['psWkYear', {rules: [{required: true, message: '请选择岗位类型'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择一个工作年限","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.wkYearList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.tag}},[e._v(" "+e._s(t.content)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"薪资范围",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psSalaryRange",{rules:[{required:!0,message:"选择薪资范围"}]}],expression:"['psSalaryRange', {rules: [{required: true, message: '选择薪资范围'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择薪资范围","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.salaryList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.tag}},[e._v(" "+e._s(t.content)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"工作类型",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psType",{rules:[{required:!0,message:"请选择岗位类型"}]}],expression:"['psType', {rules: [{required: true, message: '请选择岗位类型'}]}]"}],staticStyle:{width:"400px"},attrs:{"show-search":"",placeholder:"选择一个工作类型","option-filter-prop":"children","filter-option":e.filterOption}},e._l(e.typeList,(function(t,r){return a("a-select-option",{key:t.tag,attrs:{index:r,item:t,value:t.tag}},[e._v(" "+e._s(t.content)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"有效时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["psStrengthEnd",{rules:[{required:!0,message:"请选择有效时间"}]}],expression:"['psStrengthEnd', {rules: [{required: true, message: '请选择有效时间'}]}]"}],attrs:{format:"YYYY-MM-DD"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"置顶时间",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-time-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["showTime",{rules:[{required:!1,message:"请选择有效时间"}]}],expression:"['showTime', {rules: [{required: false, message: '请选择有效时间'}]}]"}],on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"年龄限制",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["ageLimit",{rules:[{required:!1,message:"请选择有效的年龄"}]}],expression:"['ageLimit', {rules: [{required: false, message: '请选择有效的年龄'}]}]"}],attrs:{format:"YYYY/MM/DD"},on:{change:e.onChange}})],1),a("a-form-item",{attrs:{label:"标签列表",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["psTagListName",{rules:[{required:!0,message:"请选择职位优势"}]}],expression:"['psTagListName', {rules: [{required: true, message: '请选择职位优势'}]}]"}],staticStyle:{width:"100%"},attrs:{mode:"multiple",placeholder:"选择职位标签",value:e.tags},on:{change:e.tagChange}},e._l(e.filteredOptions,(function(t,r){return a("a-select-option",{key:t,attrs:{index:r,value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),a("a-form-item",{attrs:{label:"岗位描述",labelCol:e.labelCol,wrapperCol:e.wrapperCol,"has-feedback":""}}),a("div",{staticClass:"editer"},[a("editor",{attrs:{isClear:e.isClear},on:{change:e.onChange},model:{value:e.detail,callback:function(t){e.detail=t},expression:"detail"}})],1)],1)],1)],1)},i=[],o=(a("4de4"),a("caad"),a("2532"),a("d81d"),a("ac1f"),a("1276"),a("4d63"),a("25f0"),a("159b"),a("d3b7"),a("30e7")),s=a("eed9"),n=a("d507"),l=a("6364"),c=a("6174"),u={components:{editor:c["a"]},data:function(){return{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:15}},visible:!1,confirmLoading:!1,form:this.$form.createForm(this),eduModeList:[],wkYearList:[],salaryList:[],categoryList:[],typeList:[],cityList:[],companyList:[],cityArray:l["default"],tagList:[],tags:[],isClear:!1,detail:"",positionId:0}},computed:{filteredOptions:function(){var e=this;return this.tagList.filter((function(t){return!e.tags.includes(t)}))}},methods:{edit:function(e){var t=this;this.visible=!0;var a=this;Object(s["a"])("POSITION_CATEGORY").then((function(e){return t.categoryList=e.data})),Object(s["a"])("PS_EDU_MODE").then((function(e){return t.eduModeList=e.data})),Object(s["a"])("SALARY_RANGE").then((function(e){return t.salaryList=e.data})),Object(s["a"])("WORK_TYPE").then((function(e){return t.typeList=e.data})),Object(s["a"])("WORK_YEAR").then((function(e){return t.wkYearList=e.data})),Object(s["a"])("PS_ADVANTAGE").then((function(e){return t.tagList=e.data.map((function(e){return e.content}))})),Object(n["b"])().then((function(e){return t.companyList=e.data}));this.companyList;this.detail=e.psJdContent,setTimeout((function(){var r=t.cityArray.filter((function(t){return t.label==e.psProvince.substring(0,2)}))[0],i=r.children.filter((function(t){return t.label==e.psCity}))[0],o=i.children.filter((function(t){return t.label==e.psArea}))[0],s=[r.value,i.value,o.value];a.cityList=s;var n=e.psTagListName.split("@").filter((function(e){return""!=e}));n=n.filter((function(e){return""!=e})),a.tags=n,a.positionId=e.id,t.form.setFieldsValue({psName:e.psName,cpName:e.cpName,psTagListName:n,psCategory:e.psCategory,psEduMode:e.psEduMode,psSalaryRange:e.psSalaryRange,psStrengthEnd:e.psStrengthEnd,ageLimit:e.ageLimit,showTime:e.showTime,psType:e.psType,pccList:s,psWkYear:e.psWkYear})}),100)},handleSubmit:function(){var e=this,t=this.form.validateFields;this.confirmLoading=!0;var a=this;t((function(t,r){if(t)e.confirmLoading=!1;else{var i=/^[0-9]*$/,s=new RegExp(i);if(!s.test(r.psEduMode)){var n=a.eduModeList.filter((function(e){return e.content==r.psEduMode}));r.psEduMode=n[0].tag}if(!s.test(r.psType)){var c=a.typeList.filter((function(e){return e.content==r.psType}));r.psType=c[0].tag}if(!s.test(r.psWkYear)){var u=a.wkYearList.filter((function(e){return e.content==r.psWkYear}));r.psWkYear=u[0].tag}if(!s.test(r.psSalaryRange)){var d=a.salaryList.filter((function(e){return e.content==r.psSalaryRange}));r.psSalaryRange=d[0].tag}if(!s.test(r.psCategory)){var p=a.categoryList.filter((function(e){return e.content==r.psCategory}));r.psCategory=p[0].tag}r.id=a.positionId;var f=l["default"].filter((function(e){return e.value===r.pccList[0]}))[0];r.psProvince=f.label;var m=f.children.filter((function(e){return e.value===r.pccList[1]}))[0];r.psCity=m.label,r.psArea=m.children.filter((function(e){return e.value===r.pccList[2]}))[0].label,r.psWkPlace=r.psProvince+r.psCity+r.psArea;var h="";r.pccList.forEach((function(e){return h+=e+"@"})),r.pccList=h;var g=r.psTagListName,b="";g.forEach((function(e){return b+=e+"@"})),r.psTagListName=b;var C=r.psStrengthEnd;r.psStrengthEnd=a.dayjs(C).format("YYYY-MM-DD HH:mm:ss"),r.ageLimit&&(r.ageLimit=a.dayjs(r.ageLimit).format("YYYY-MM-DD HH:mm:ss")),r.showTime&&(r.showTime=a.dayjs(r.showTime).format("HH:mm:ss")),r.psJdContent=a.detail,Object(o["d"])(r).then((function(t){r.psJdContent=a.detail,e.confirmLoading=!1,0==t.code?(e.$message.success("编辑成功"),e.handleCancel(),e.$emit("ok",r)):e.$message.info("编辑失败："+t.message)})).finally((function(t){e.confirmLoading=!1}))}}))},handleCancel:function(){this.form.resetFields(),this.visible=!1},onChange:function(e){},handleChange:function(e){},tagChange:function(e){this.tags=e},filterOption:function(e,t){return t.componentOptions.children[0].text.toLowerCase().indexOf(e.toLowerCase())>=0}}},d=u,p=(a("ce29"),a("2877")),f=Object(p["a"])(d,r,i,!1,null,"474a2de7",null);t["default"]=f.exports}}]);